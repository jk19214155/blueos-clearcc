     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_alloc
     7 00000000                                 	EXTERN	_task_now
     8 00000000                                 	EXTERN	_memman_alloc_4k
     9 00000000                                 	EXTERN	_memmam_link_page_32_m
    10 00000000                                 	EXTERN	_pageman_link_page_32_m
    11 00000000                                 	EXTERN	_get_this
    12 00000000                                 	EXTERN	_sheet_alloc
    13 00000000                                 	EXTERN	_boxfill8
    14 00000000                                 	EXTERN	_sheet_updown
    15 00000000                                 	EXTERN	_task_run
    16 00000000                                 	EXTERN	_fifo32_init
    17 00000000                                 	EXTERN	_shtctl_init
    18 00000000                                 	EXTERN	_sheet_refreshsub
    19 00000000                                 	EXTERN	_task_sleep
    20 00000000                                 [FILE "desktop.c"]
    21                                          [SECTION .text]
    22 00000000                                 	GLOBAL	_desktop_start
    23 00000000                                 _desktop_start:
    24 00000000 55                              	PUSH	EBP
    25 00000001 89 E5                           	MOV	EBP,ESP
    26 00000003 57                              	PUSH	EDI
    27 00000004 56                              	PUSH	ESI
    28 00000005 53                              	PUSH	EBX
    29 00000006 50                              	PUSH	EAX
    30 00000007 50                              	PUSH	EAX
    31 00000008 A1 0026F000                     	MOV	EAX,DWORD [2551808]
    32 0000000D 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
    33 00000010 E8 [00000000]                   	CALL	_task_alloc
    34 00000015 89 C6                           	MOV	ESI,EAX
    35 00000017 E8 [00000000]                   	CALL	_task_now
    36 0000001C 8B 3D 00000FE4                  	MOV	EDI,DWORD [4068]
    37 00000022 68 00000200                     	PUSH	512
    38 00000027 68 003C0000                     	PUSH	3932160
    39 0000002C E8 [00000000]                   	CALL	_memman_alloc_4k
    40 00000031 6A 00                           	PUSH	0
    41 00000033 6A 01                           	PUSH	1
    42 00000035 6A 07                           	PUSH	7
    43 00000037 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
    44 0000003A 50                              	PUSH	EAX
    45 0000003B 68 00268000                     	PUSH	2523136
    46 00000040 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    47 00000043 E8 [00000000]                   	CALL	_memmam_link_page_32_m
    48 00000048 83 C4 20                        	ADD	ESP,32
    49 0000004B 68 00010000                     	PUSH	65536
    50 00000050 68 003C0000                     	PUSH	3932160
    51 00000055 E8 [00000000]                   	CALL	_memman_alloc_4k
    52 0000005A 89 86 000000D0                  	MOV	DWORD [208+ESI],EAX
    53 00000060 6A 00                           	PUSH	0
    54 00000062 6A 10                           	PUSH	16
    55 00000064 6A 07                           	PUSH	7
    56 00000066 50                              	PUSH	EAX
    57 00000067 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    58 0000006A E8 [00000000]                   	CALL	_pageman_link_page_32_m
    59 0000006F 8B 86 000000D0                  	MOV	EAX,DWORD [208+ESI]
    60 00000075 05 0000FFF4                     	ADD	EAX,65524
    61 0000007A 89 46 78                        	MOV	DWORD [120+ESI],EAX
    62 0000007D E8 [00000000]                   	CALL	_get_this
    63 00000082 05 [00000196]                   	ADD	EAX,_desktop_task
    64 00000087 89 46 60                        	MOV	DWORD [96+ESI],EAX
    65 0000008A C7 86 00000088 00000008         	MOV	DWORD [136+ESI],8
    66 00000094 C7 86 0000008C 00000010         	MOV	DWORD [140+ESI],16
    67 0000009E C7 86 00000090 00000008         	MOV	DWORD [144+ESI],8
    68 000000A8 C7 86 00000094 00000008         	MOV	DWORD [148+ESI],8
    69 000000B2 C7 86 00000098 00000008         	MOV	DWORD [152+ESI],8
    70 000000BC C7 86 0000009C 00000008         	MOV	DWORD [156+ESI],8
    71 000000C6 C7 86 00000102 00000008         	MOV	DWORD [258+ESI],8
    72 000000D0 C7 46 5C 00268000               	MOV	DWORD [92+ESI],2523136
    73 000000D7 C7 86 00000116 003C0000         	MOV	DWORD [278+ESI],3932160
    74 000000E1 57                              	PUSH	EDI
    75 000000E2 E8 [00000000]                   	CALL	_sheet_alloc
    76 000000E7 83 C4 20                        	ADD	ESP,32
    77 000000EA 89 C3                           	MOV	EBX,EAX
    78 000000EC 83 48 20 02                     	OR	DWORD [32+EAX],2
    79 000000F0 8B 87 0000041C                  	MOV	EAX,DWORD [1052+EDI]
    80 000000F6 C7 43 10 00000000               	MOV	DWORD [16+EBX],0
    81 000000FD 8B 50 08                        	MOV	EDX,DWORD [8+EAX]
    82 00000100 8B 40 0C                        	MOV	EAX,DWORD [12+EAX]
    83 00000103 89 53 08                        	MOV	DWORD [8+EBX],EDX
    84 00000106 89 43 0C                        	MOV	DWORD [12+EBX],EAX
    85 00000109 0F AF D0                        	IMUL	EDX,EAX
    86 0000010C C7 43 14 00000000               	MOV	DWORD [20+EBX],0
    87 00000113 C7 43 18 00000000               	MOV	DWORD [24+EBX],0
    88 0000011A 52                              	PUSH	EDX
    89 0000011B 68 003C0000                     	PUSH	3932160
    90 00000120 E8 [00000000]                   	CALL	_memman_alloc_4k
    91 00000125 89 03                           	MOV	DWORD [EBX],EAX
    92 00000127 6A 00                           	PUSH	0
    93 00000129 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
    94 0000012C 0F AF 43 08                     	IMUL	EAX,DWORD [8+EBX]
    95 00000130 05 00000FFF                     	ADD	EAX,4095
    96 00000135 C1 F8 0C                        	SAR	EAX,12
    97 00000138 50                              	PUSH	EAX
    98 00000139 6A 07                           	PUSH	7
    99 0000013B FF 33                           	PUSH	DWORD [EBX]
   100 0000013D FF 75 F0                        	PUSH	DWORD [-16+EBP]
   101 00000140 E8 [00000000]                   	CALL	_pageman_link_page_32_m
   102 00000145 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
   103 00000148 48                              	DEC	EAX
   104 00000149 50                              	PUSH	EAX
   105 0000014A 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   106 0000014D 48                              	DEC	EAX
   107 0000014E 50                              	PUSH	EAX
   108 0000014F 6A 00                           	PUSH	0
   109 00000151 6A 00                           	PUSH	0
   110 00000153 6A 0F                           	PUSH	15
   111 00000155 FF 73 08                        	PUSH	DWORD [8+EBX]
   112 00000158 FF 33                           	PUSH	DWORD [EBX]
   113 0000015A E8 [00000000]                   	CALL	_boxfill8
   114 0000015F 83 C4 38                        	ADD	ESP,56
   115 00000162 6A 01                           	PUSH	1
   116 00000164 53                              	PUSH	EBX
   117 00000165 E8 [00000000]                   	CALL	_sheet_updown
   118 0000016A 8B 46 78                        	MOV	EAX,DWORD [120+ESI]
   119 0000016D 89 58 04                        	MOV	DWORD [4+EAX],EBX
   120 00000170 6A 02                           	PUSH	2
   121 00000172 6A 02                           	PUSH	2
   122 00000174 56                              	PUSH	ESI
   123 00000175 E8 [00000000]                   	CALL	_task_run
   124 0000017A 8D 46 10                        	LEA	EAX,DWORD [16+ESI]
   125 0000017D 56                              	PUSH	ESI
   126 0000017E FF 75 EC                        	PUSH	DWORD [-20+EBP]
   127 00000181 68 00000080                     	PUSH	128
   128 00000186 50                              	PUSH	EAX
   129 00000187 E8 [00000000]                   	CALL	_fifo32_init
   130 0000018C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   131 0000018F 5B                              	POP	EBX
   132 00000190 89 F0                           	MOV	EAX,ESI
   133 00000192 5E                              	POP	ESI
   134 00000193 5F                              	POP	EDI
   135 00000194 5D                              	POP	EBP
   136 00000195 C3                              	RET
   137 00000196                                 	GLOBAL	_desktop_task
   138 00000196                                 _desktop_task:
   139 00000196 55                              	PUSH	EBP
   140 00000197 89 E5                           	MOV	EBP,ESP
   141 00000199 57                              	PUSH	EDI
   142 0000019A 56                              	PUSH	ESI
   143 0000019B 53                              	PUSH	EBX
   144 0000019C 81 EC 000000A4                  	SUB	ESP,164
   145 000001A2 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   146 000001A5 A1 0026F000                     	MOV	EAX,DWORD [2551808]
   147 000001AA 89 85 FFFFFF50                  	MOV	DWORD [-176+EBP],EAX
   148 000001B0 E8 [00000000]                   	CALL	_task_now
   149 000001B5 FF 73 0C                        	PUSH	DWORD [12+EBX]
   150 000001B8 FF 73 08                        	PUSH	DWORD [8+EBX]
   151 000001BB FF 33                           	PUSH	DWORD [EBX]
   152 000001BD FF B5 FFFFFF50                  	PUSH	DWORD [-176+EBP]
   153 000001C3 68 003C0000                     	PUSH	3932160
   154 000001C8 E8 [00000000]                   	CALL	_shtctl_init
   155 000001CD 8B 53 28                        	MOV	EDX,DWORD [40+EBX]
   156 000001D0 89 C6                           	MOV	ESI,EAX
   157 000001D2 89 43 2C                        	MOV	DWORD [44+EBX],EAX
   158 000001D5 89 98 00000820                  	MOV	DWORD [2080+EAX],EBX
   159 000001DB 8B 82 0000081C                  	MOV	EAX,DWORD [2076+EDX]
   160 000001E1 89 86 0000081C                  	MOV	DWORD [2076+ESI],EAX
   161 000001E7 8B 82 00000418                  	MOV	EAX,DWORD [1048+EDX]
   162 000001ED 89 86 00000418                  	MOV	DWORD [1048+ESI],EAX
   163 000001F3 56                              	PUSH	ESI
   164 000001F4 E8 [00000000]                   	CALL	_sheet_alloc
   165 000001F9 8B 53 0C                        	MOV	EDX,DWORD [12+EBX]
   166 000001FC 89 C7                           	MOV	EDI,EAX
   167 000001FE 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   168 00000201 89 47 08                        	MOV	DWORD [8+EDI],EAX
   169 00000204 89 57 0C                        	MOV	DWORD [12+EDI],EDX
   170 00000207 0F AF C2                        	IMUL	EAX,EDX
   171 0000020A C7 47 18 FFFFFFFF               	MOV	DWORD [24+EDI],-1
   172 00000211 50                              	PUSH	EAX
   173 00000212 68 003C0000                     	PUSH	3932160
   174 00000217 E8 [00000000]                   	CALL	_memman_alloc_4k
   175 0000021C 83 C4 20                        	ADD	ESP,32
   176 0000021F 6A 00                           	PUSH	0
   177 00000221 8B 57 0C                        	MOV	EDX,DWORD [12+EDI]
   178 00000224 0F AF 57 08                     	IMUL	EDX,DWORD [8+EDI]
   179 00000228 81 C2 00000FFF                  	ADD	EDX,4095
   180 0000022E C1 FA 0C                        	SAR	EDX,12
   181 00000231 52                              	PUSH	EDX
   182 00000232 6A 07                           	PUSH	7
   183 00000234 50                              	PUSH	EAX
   184 00000235 FF B5 FFFFFF50                  	PUSH	DWORD [-176+EBP]
   185 0000023B E8 [00000000]                   	CALL	_pageman_link_page_32_m
   186 00000240 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   187 00000246 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   188 00000249 FF B0 00000414                  	PUSH	DWORD [1044+EAX]
   189 0000024F 6A 00                           	PUSH	0
   190 00000251 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   191 00000257 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   192 0000025A FF B0 00000410                  	PUSH	DWORD [1040+EAX]
   193 00000260 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   194 00000266 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   195 00000269 FF B0 0000040C                  	PUSH	DWORD [1036+EAX]
   196 0000026F 6A 00                           	PUSH	0
   197 00000271 6A 00                           	PUSH	0
   198 00000273 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   199 00000279 FF 70 28                        	PUSH	DWORD [40+EAX]
   200 0000027C E8 [00000000]                   	CALL	_sheet_refreshsub
   201 00000281 83 C4 30                        	ADD	ESP,48
   202 00000284 E8 [00000000]                   	CALL	_task_now
   203 00000289 50                              	PUSH	EAX
   204 0000028A E8 [00000000]                   	CALL	_task_sleep
   205 0000028F 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   206 00000292 5B                              	POP	EBX
   207 00000293 89 F8                           	MOV	EAX,EDI
   208 00000295 5E                              	POP	ESI
   209 00000296 5F                              	POP	EDI
   210 00000297 5D                              	POP	EBP
   211 00000298 C3                              	RET
