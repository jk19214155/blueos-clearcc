     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_alloc
     7 00000000                                 	EXTERN	_task_now
     8 00000000                                 	EXTERN	_memman_alloc_4k
     9 00000000                                 	EXTERN	_memmam_link_page_32_m
    10 00000000                                 	EXTERN	_pageman_link_page_32_m
    11 00000000                                 	EXTERN	_sheet_alloc
    12 00000000                                 	EXTERN	_boxfill8
    13 00000000                                 	EXTERN	_sheet_updown
    14 00000000                                 	EXTERN	_task_run
    15 00000000                                 	EXTERN	_fifo32_init
    16 00000000                                 	EXTERN	_shtctl_init
    17 00000000                                 	EXTERN	_sheet_slide
    18 00000000                                 	EXTERN	_sheet_refreshsub
    19 00000000                                 	EXTERN	_sheet_setbuf
    20 00000000                                 	EXTERN	_textview_flush
    21 00000000                                 	EXTERN	_task_sleep
    22 00000000                                 [FILE "desktop.c"]
    23                                          [SECTION .text]
    24 00000000                                 	GLOBAL	_desktop_start
    25 00000000                                 _desktop_start:
    26 00000000 55                              	PUSH	EBP
    27 00000001 89 E5                           	MOV	EBP,ESP
    28 00000003 57                              	PUSH	EDI
    29 00000004 56                              	PUSH	ESI
    30 00000005 53                              	PUSH	EBX
    31 00000006 50                              	PUSH	EAX
    32 00000007 50                              	PUSH	EAX
    33 00000008 A1 0026F000                     	MOV	EAX,DWORD [2551808]
    34 0000000D 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
    35 00000010 E8 [00000000]                   	CALL	_task_alloc
    36 00000015 89 C6                           	MOV	ESI,EAX
    37 00000017 E8 [00000000]                   	CALL	_task_now
    38 0000001C 8B 3D 00000FE4                  	MOV	EDI,DWORD [4068]
    39 00000022 68 00000200                     	PUSH	512
    40 00000027 68 003C0000                     	PUSH	3932160
    41 0000002C E8 [00000000]                   	CALL	_memman_alloc_4k
    42 00000031 6A 00                           	PUSH	0
    43 00000033 6A 01                           	PUSH	1
    44 00000035 6A 07                           	PUSH	7
    45 00000037 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
    46 0000003A 50                              	PUSH	EAX
    47 0000003B 68 00268000                     	PUSH	2523136
    48 00000040 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    49 00000043 E8 [00000000]                   	CALL	_memmam_link_page_32_m
    50 00000048 83 C4 20                        	ADD	ESP,32
    51 0000004B 68 00010000                     	PUSH	65536
    52 00000050 68 003C0000                     	PUSH	3932160
    53 00000055 E8 [00000000]                   	CALL	_memman_alloc_4k
    54 0000005A 89 86 000000BC                  	MOV	DWORD [188+ESI],EAX
    55 00000060 6A 00                           	PUSH	0
    56 00000062 6A 10                           	PUSH	16
    57 00000064 6A 07                           	PUSH	7
    58 00000066 50                              	PUSH	EAX
    59 00000067 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    60 0000006A E8 [00000000]                   	CALL	_pageman_link_page_32_m
    61 0000006F 8B 86 000000BC                  	MOV	EAX,DWORD [188+ESI]
    62 00000075 05 0000FFF4                     	ADD	EAX,65524
    63 0000007A 89 46 64                        	MOV	DWORD [100+ESI],EAX
    64 0000007D C7 46 4C [00000187]             	MOV	DWORD [76+ESI],_desktop_task
    65 00000084 C7 46 74 00000008               	MOV	DWORD [116+ESI],8
    66 0000008B C7 46 78 00000010               	MOV	DWORD [120+ESI],16
    67 00000092 C7 46 7C 00000008               	MOV	DWORD [124+ESI],8
    68 00000099 C7 86 00000080 00000008         	MOV	DWORD [128+ESI],8
    69 000000A3 C7 86 00000084 00000008         	MOV	DWORD [132+ESI],8
    70 000000AD C7 86 00000088 00000008         	MOV	DWORD [136+ESI],8
    71 000000B7 C7 86 000000F0 00000008         	MOV	DWORD [240+ESI],8
    72 000000C1 C7 46 48 00268000               	MOV	DWORD [72+ESI],2523136
    73 000000C8 C7 86 00000104 003C0000         	MOV	DWORD [260+ESI],3932160
    74 000000D2 57                              	PUSH	EDI
    75 000000D3 E8 [00000000]                   	CALL	_sheet_alloc
    76 000000D8 83 C4 20                        	ADD	ESP,32
    77 000000DB 89 C3                           	MOV	EBX,EAX
    78 000000DD 83 48 20 02                     	OR	DWORD [32+EAX],2
    79 000000E1 8B 87 0000041C                  	MOV	EAX,DWORD [1052+EDI]
    80 000000E7 C7 43 10 00000000               	MOV	DWORD [16+EBX],0
    81 000000EE 8B 50 08                        	MOV	EDX,DWORD [8+EAX]
    82 000000F1 8B 40 0C                        	MOV	EAX,DWORD [12+EAX]
    83 000000F4 89 53 08                        	MOV	DWORD [8+EBX],EDX
    84 000000F7 89 43 0C                        	MOV	DWORD [12+EBX],EAX
    85 000000FA 0F AF D0                        	IMUL	EDX,EAX
    86 000000FD C7 43 14 00000000               	MOV	DWORD [20+EBX],0
    87 00000104 C7 43 18 00000000               	MOV	DWORD [24+EBX],0
    88 0000010B 52                              	PUSH	EDX
    89 0000010C 68 003C0000                     	PUSH	3932160
    90 00000111 E8 [00000000]                   	CALL	_memman_alloc_4k
    91 00000116 89 03                           	MOV	DWORD [EBX],EAX
    92 00000118 6A 00                           	PUSH	0
    93 0000011A 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
    94 0000011D 0F AF 43 08                     	IMUL	EAX,DWORD [8+EBX]
    95 00000121 05 00000FFF                     	ADD	EAX,4095
    96 00000126 C1 F8 0C                        	SAR	EAX,12
    97 00000129 50                              	PUSH	EAX
    98 0000012A 6A 07                           	PUSH	7
    99 0000012C FF 33                           	PUSH	DWORD [EBX]
   100 0000012E FF 75 F0                        	PUSH	DWORD [-16+EBP]
   101 00000131 E8 [00000000]                   	CALL	_pageman_link_page_32_m
   102 00000136 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
   103 00000139 48                              	DEC	EAX
   104 0000013A 50                              	PUSH	EAX
   105 0000013B 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   106 0000013E 48                              	DEC	EAX
   107 0000013F 50                              	PUSH	EAX
   108 00000140 6A 00                           	PUSH	0
   109 00000142 6A 00                           	PUSH	0
   110 00000144 6A 0F                           	PUSH	15
   111 00000146 FF 73 08                        	PUSH	DWORD [8+EBX]
   112 00000149 FF 33                           	PUSH	DWORD [EBX]
   113 0000014B E8 [00000000]                   	CALL	_boxfill8
   114 00000150 83 C4 38                        	ADD	ESP,56
   115 00000153 6A 01                           	PUSH	1
   116 00000155 53                              	PUSH	EBX
   117 00000156 E8 [00000000]                   	CALL	_sheet_updown
   118 0000015B 8B 46 64                        	MOV	EAX,DWORD [100+ESI]
   119 0000015E 89 58 04                        	MOV	DWORD [4+EAX],EBX
   120 00000161 6A 02                           	PUSH	2
   121 00000163 6A 02                           	PUSH	2
   122 00000165 56                              	PUSH	ESI
   123 00000166 E8 [00000000]                   	CALL	_task_run
   124 0000016B 8D 46 10                        	LEA	EAX,DWORD [16+ESI]
   125 0000016E 56                              	PUSH	ESI
   126 0000016F FF 75 EC                        	PUSH	DWORD [-20+EBP]
   127 00000172 68 00000080                     	PUSH	128
   128 00000177 50                              	PUSH	EAX
   129 00000178 E8 [00000000]                   	CALL	_fifo32_init
   130 0000017D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   131 00000180 5B                              	POP	EBX
   132 00000181 89 F0                           	MOV	EAX,ESI
   133 00000183 5E                              	POP	ESI
   134 00000184 5F                              	POP	EDI
   135 00000185 5D                              	POP	EBP
   136 00000186 C3                              	RET
   137                                          [SECTION .data]
   138 00000000                                 LC0:
   139 00000000 31 32 33 00                     	DB	"123",0x00
   140                                          [SECTION .text]
   141 00000187                                 	GLOBAL	_desktop_task
   142 00000187                                 _desktop_task:
   143 00000187 55                              	PUSH	EBP
   144 00000188 89 E5                           	MOV	EBP,ESP
   145 0000018A 57                              	PUSH	EDI
   146 0000018B 56                              	PUSH	ESI
   147 0000018C 53                              	PUSH	EBX
   148 0000018D 81 EC 00000084                  	SUB	ESP,132
   149 00000193 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   150 00000196 A1 0026F000                     	MOV	EAX,DWORD [2551808]
   151 0000019B 89 85 FFFFFF70                  	MOV	DWORD [-144+EBP],EAX
   152 000001A1 E8 [00000000]                   	CALL	_task_now
   153 000001A6 FF 73 0C                        	PUSH	DWORD [12+EBX]
   154 000001A9 FF 73 08                        	PUSH	DWORD [8+EBX]
   155 000001AC FF 33                           	PUSH	DWORD [EBX]
   156 000001AE FF B5 FFFFFF70                  	PUSH	DWORD [-144+EBP]
   157 000001B4 68 003C0000                     	PUSH	3932160
   158 000001B9 E8 [00000000]                   	CALL	_shtctl_init
   159 000001BE 8B 53 28                        	MOV	EDX,DWORD [40+EBX]
   160 000001C1 89 C6                           	MOV	ESI,EAX
   161 000001C3 89 43 2C                        	MOV	DWORD [44+EBX],EAX
   162 000001C6 89 98 00000820                  	MOV	DWORD [2080+EAX],EBX
   163 000001CC 8B 82 0000081C                  	MOV	EAX,DWORD [2076+EDX]
   164 000001D2 89 86 0000081C                  	MOV	DWORD [2076+ESI],EAX
   165 000001D8 8B 82 00000418                  	MOV	EAX,DWORD [1048+EDX]
   166 000001DE 89 86 00000418                  	MOV	DWORD [1048+ESI],EAX
   167 000001E4 56                              	PUSH	ESI
   168 000001E5 E8 [00000000]                   	CALL	_sheet_alloc
   169 000001EA 8B 53 0C                        	MOV	EDX,DWORD [12+EBX]
   170 000001ED 89 C7                           	MOV	EDI,EAX
   171 000001EF 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   172 000001F2 89 47 08                        	MOV	DWORD [8+EDI],EAX
   173 000001F5 89 57 0C                        	MOV	DWORD [12+EDI],EDX
   174 000001F8 0F AF C2                        	IMUL	EAX,EDX
   175 000001FB C7 47 18 FFFFFFFF               	MOV	DWORD [24+EDI],-1
   176 00000202 50                              	PUSH	EAX
   177 00000203 68 003C0000                     	PUSH	3932160
   178 00000208 E8 [00000000]                   	CALL	_memman_alloc_4k
   179 0000020D 83 C4 20                        	ADD	ESP,32
   180 00000210 89 C3                           	MOV	EBX,EAX
   181 00000212 6A 00                           	PUSH	0
   182 00000214 8B 47 0C                        	MOV	EAX,DWORD [12+EDI]
   183 00000217 0F AF 47 08                     	IMUL	EAX,DWORD [8+EDI]
   184 0000021B 05 00000FFF                     	ADD	EAX,4095
   185 00000220 C1 F8 0C                        	SAR	EAX,12
   186 00000223 50                              	PUSH	EAX
   187 00000224 6A 07                           	PUSH	7
   188 00000226 53                              	PUSH	EBX
   189 00000227 FF B5 FFFFFF70                  	PUSH	DWORD [-144+EBP]
   190 0000022D E8 [00000000]                   	CALL	_pageman_link_page_32_m
   191 00000232 8B 47 0C                        	MOV	EAX,DWORD [12+EDI]
   192 00000235 48                              	DEC	EAX
   193 00000236 89 1F                           	MOV	DWORD [EDI],EBX
   194 00000238 50                              	PUSH	EAX
   195 00000239 8B 47 08                        	MOV	EAX,DWORD [8+EDI]
   196 0000023C 48                              	DEC	EAX
   197 0000023D 50                              	PUSH	EAX
   198 0000023E 6A 00                           	PUSH	0
   199 00000240 6A 00                           	PUSH	0
   200 00000242 6A 0F                           	PUSH	15
   201 00000244 FF 77 08                        	PUSH	DWORD [8+EDI]
   202 00000247 53                              	PUSH	EBX
   203 00000248 E8 [00000000]                   	CALL	_boxfill8
   204 0000024D 83 C4 30                        	ADD	ESP,48
   205 00000250 68 00002800                     	PUSH	10240
   206 00000255 68 003C0000                     	PUSH	3932160
   207 0000025A E8 [00000000]                   	CALL	_memman_alloc_4k
   208 0000025F 6A 00                           	PUSH	0
   209 00000261 6A 03                           	PUSH	3
   210 00000263 89 C3                           	MOV	EBX,EAX
   211 00000265 6A 07                           	PUSH	7
   212 00000267 50                              	PUSH	EAX
   213 00000268 FF B5 FFFFFF70                  	PUSH	DWORD [-144+EBP]
   214 0000026E E8 [00000000]                   	CALL	_pageman_link_page_32_m
   215 00000273 6A 00                           	PUSH	0
   216 00000275 6A 00                           	PUSH	0
   217 00000277 57                              	PUSH	EDI
   218 00000278 E8 [00000000]                   	CALL	_sheet_slide
   219 0000027D 83 C4 28                        	ADD	ESP,40
   220 00000280 6A 00                           	PUSH	0
   221 00000282 57                              	PUSH	EDI
   222 00000283 E8 [00000000]                   	CALL	_sheet_updown
   223 00000288 FF B6 00000414                  	PUSH	DWORD [1044+ESI]
   224 0000028E 6A 00                           	PUSH	0
   225 00000290 FF B6 00000410                  	PUSH	DWORD [1040+ESI]
   226 00000296 FF B6 0000040C                  	PUSH	DWORD [1036+ESI]
   227 0000029C 6A 00                           	PUSH	0
   228 0000029E 6A 00                           	PUSH	0
   229 000002A0 56                              	PUSH	ESI
   230 000002A1 E8 [00000000]                   	CALL	_sheet_refreshsub
   231 000002A6 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   232 000002AC 83 C4 24                        	ADD	ESP,36
   233 000002AF 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   234 000002B2 FF B0 00000414                  	PUSH	DWORD [1044+EAX]
   235 000002B8 6A 00                           	PUSH	0
   236 000002BA 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   237 000002C0 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   238 000002C3 FF B0 00000410                  	PUSH	DWORD [1040+EAX]
   239 000002C9 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   240 000002CF 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   241 000002D2 FF B0 0000040C                  	PUSH	DWORD [1036+EAX]
   242 000002D8 6A 00                           	PUSH	0
   243 000002DA 6A 00                           	PUSH	0
   244 000002DC 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   245 000002E2 FF 70 28                        	PUSH	DWORD [40+EAX]
   246 000002E5 E8 [00000000]                   	CALL	_sheet_refreshsub
   247 000002EA 83 C4 1C                        	ADD	ESP,28
   248 000002ED 6A FF                           	PUSH	-1
   249 000002EF 6A 20                           	PUSH	32
   250 000002F1 8D 85 FFFFFF74                  	LEA	EAX,DWORD [-140+EBP]
   251 000002F7 6A 20                           	PUSH	32
   252 000002F9 53                              	PUSH	EBX
   253 000002FA 50                              	PUSH	EAX
   254 000002FB E8 [00000000]                   	CALL	_sheet_setbuf
   255 00000300 6A 1F                           	PUSH	31
   256 00000302 6A 1F                           	PUSH	31
   257 00000304 6A 00                           	PUSH	0
   258 00000306 6A 00                           	PUSH	0
   259 00000308 6A 08                           	PUSH	8
   260 0000030A 6A 20                           	PUSH	32
   261 0000030C 53                              	PUSH	EBX
   262 0000030D E8 [00000000]                   	CALL	_boxfill8
   263 00000312 8D 85 FFFFFF74                  	LEA	EAX,DWORD [-140+EBP]
   264 00000318 83 C4 30                        	ADD	ESP,48
   265 0000031B 68 000001F4                     	PUSH	500
   266 00000320 68 000001F4                     	PUSH	500
   267 00000325 50                              	PUSH	EAX
   268 00000326 E8 [00000000]                   	CALL	_sheet_slide
   269 0000032B 8D 85 FFFFFF74                  	LEA	EAX,DWORD [-140+EBP]
   270 00000331 50                              	PUSH	EAX
   271 00000332 89 75 9C                        	MOV	DWORD [-100+EBP],ESI
   272 00000335 C7 45 BC [00000000]             	MOV	DWORD [-68+EBP],LC0
   273 0000033C C7 45 90 FFFFFFFF               	MOV	DWORD [-112+EBP],-1
   274 00000343 C7 45 B8 00000002               	MOV	DWORD [-72+EBP],2
   275 0000034A C7 45 C0 00000003               	MOV	DWORD [-64+EBP],3
   276 00000351 E8 [00000000]                   	CALL	_textview_flush
   277 00000356 8B 86 00000414                  	MOV	EAX,DWORD [1044+ESI]
   278 0000035C 40                              	INC	EAX
   279 0000035D 50                              	PUSH	EAX
   280 0000035E 8D 85 FFFFFF74                  	LEA	EAX,DWORD [-140+EBP]
   281 00000364 50                              	PUSH	EAX
   282 00000365 E8 [00000000]                   	CALL	_sheet_updown
   283 0000036A 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   284 00000370 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   285 00000373 FF B0 00000414                  	PUSH	DWORD [1044+EAX]
   286 00000379 6A 00                           	PUSH	0
   287 0000037B 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   288 00000381 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   289 00000384 FF B0 00000410                  	PUSH	DWORD [1040+EAX]
   290 0000038A 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   291 00000390 8B 40 28                        	MOV	EAX,DWORD [40+EAX]
   292 00000393 FF B0 0000040C                  	PUSH	DWORD [1036+EAX]
   293 00000399 6A 00                           	PUSH	0
   294 0000039B 6A 00                           	PUSH	0
   295 0000039D 8B 86 00000820                  	MOV	EAX,DWORD [2080+ESI]
   296 000003A3 FF 70 28                        	PUSH	DWORD [40+EAX]
   297 000003A6 E8 [00000000]                   	CALL	_sheet_refreshsub
   298 000003AB 83 C4 34                        	ADD	ESP,52
   299 000003AE E8 [00000000]                   	CALL	_task_now
   300 000003B3 50                              	PUSH	EAX
   301 000003B4 E8 [00000000]                   	CALL	_task_sleep
   302 000003B9 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   303 000003BC 5B                              	POP	EBX
   304 000003BD 89 F8                           	MOV	EAX,EDI
   305 000003BF 5E                              	POP	ESI
   306 000003C0 5F                              	POP	EDI
   307 000003C1 5D                              	POP	EBP
   308 000003C2 C3                              	RET
