     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_out8
     7 00000000                                 	EXTERN	_io_rdmsr
     8 00000000                                 	EXTERN	_io_wrmsr
     9 00000000                                 [FILE "int.c"]
    10                                          [SECTION .text]
    11 00000000                                 	GLOBAL	_init_pic
    12 00000000                                 _init_pic:
    13 00000000 55                              	PUSH	EBP
    14 00000001 89 E5                           	MOV	EBP,ESP
    15 00000003 68 000000FF                     	PUSH	255
    16 00000008 6A 21                           	PUSH	33
    17 0000000A E8 [00000000]                   	CALL	_io_out8
    18 0000000F 68 000000FF                     	PUSH	255
    19 00000014 68 000000A1                     	PUSH	161
    20 00000019 E8 [00000000]                   	CALL	_io_out8
    21 0000001E 6A 11                           	PUSH	17
    22 00000020 6A 20                           	PUSH	32
    23 00000022 E8 [00000000]                   	CALL	_io_out8
    24 00000027 6A 20                           	PUSH	32
    25 00000029 6A 21                           	PUSH	33
    26 0000002B E8 [00000000]                   	CALL	_io_out8
    27 00000030 83 C4 20                        	ADD	ESP,32
    28 00000033 6A 04                           	PUSH	4
    29 00000035 6A 21                           	PUSH	33
    30 00000037 E8 [00000000]                   	CALL	_io_out8
    31 0000003C 6A 01                           	PUSH	1
    32 0000003E 6A 21                           	PUSH	33
    33 00000040 E8 [00000000]                   	CALL	_io_out8
    34 00000045 6A 11                           	PUSH	17
    35 00000047 68 000000A0                     	PUSH	160
    36 0000004C E8 [00000000]                   	CALL	_io_out8
    37 00000051 6A 28                           	PUSH	40
    38 00000053 68 000000A1                     	PUSH	161
    39 00000058 E8 [00000000]                   	CALL	_io_out8
    40 0000005D 83 C4 20                        	ADD	ESP,32
    41 00000060 6A 02                           	PUSH	2
    42 00000062 68 000000A1                     	PUSH	161
    43 00000067 E8 [00000000]                   	CALL	_io_out8
    44 0000006C 6A 01                           	PUSH	1
    45 0000006E 68 000000A1                     	PUSH	161
    46 00000073 E8 [00000000]                   	CALL	_io_out8
    47 00000078 68 000000FB                     	PUSH	251
    48 0000007D 6A 21                           	PUSH	33
    49 0000007F E8 [00000000]                   	CALL	_io_out8
    50 00000084 68 000000FF                     	PUSH	255
    51 00000089 68 000000A1                     	PUSH	161
    52 0000008E E8 [00000000]                   	CALL	_io_out8
    53 00000093 C9                              	LEAVE
    54 00000094 C3                              	RET
    55 00000095                                 	GLOBAL	_init_apic
    56 00000095                                 _init_apic:
    57 00000095 55                              	PUSH	EBP
    58 00000096 89 E5                           	MOV	EBP,ESP
    59 00000098 56                              	PUSH	ESI
    60 00000099 53                              	PUSH	EBX
    61 0000009A BB 00000010                     	MOV	EBX,16
    62 0000009F 50                              	PUSH	EAX
    63 000000A0 50                              	PUSH	EAX
    64 000000A1 68 000000FF                     	PUSH	255
    65 000000A6 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    66 000000A9 6A 21                           	PUSH	33
    67 000000AB E8 [00000000]                   	CALL	_io_out8
    68 000000B0 68 000000FF                     	PUSH	255
    69 000000B5 6A 21                           	PUSH	33
    70 000000B7 E8 [00000000]                   	CALL	_io_out8
    71 000000BC 8D 45 F4                        	LEA	EAX,DWORD [-12+EBP]
    72 000000BF 6A 1B                           	PUSH	27
    73 000000C1 50                              	PUSH	EAX
    74 000000C2 8D 45 F0                        	LEA	EAX,DWORD [-16+EBP]
    75 000000C5 50                              	PUSH	EAX
    76 000000C6 E8 [00000000]                   	CALL	_io_rdmsr
    77 000000CB 6A 1B                           	PUSH	27
    78 000000CD 8B 45 F4                        	MOV	EAX,DWORD [-12+EBP]
    79 000000D0 0D 00000400                     	OR	EAX,1024
    80 000000D5 50                              	PUSH	EAX
    81 000000D6 89 45 F4                        	MOV	DWORD [-12+EBP],EAX
    82 000000D9 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    83 000000DC E8 [00000000]                   	CALL	_io_wrmsr
    84 000000E1 83 C4 28                        	ADD	ESP,40
    85 000000E4 81 8E 000000F0 00000100         	OR	DWORD [240+ESI],256
    86 000000EE 68 00F00000                     	PUSH	15728640
    87 000000F3 6A 00                           	PUSH	0
    88 000000F5 E8 0000006C                     	CALL	_io_write_io_apic
    89 000000FA 59                              	POP	ECX
    90 000000FB 58                              	POP	EAX
    91 000000FC                                 L7:
    92 000000FC 0F B6 C3                        	MOVZX	EAX,BL
    93 000000FF 68 00020000                     	PUSH	131072
    94 00000104 83 C3 02                        	ADD	EBX,2
    95 00000107 50                              	PUSH	EAX
    96 00000108 E8 00000059                     	CALL	_io_write_io_apic
    97 0000010D 83 FB 3E                        	CMP	EBX,62
    98 00000110 58                              	POP	EAX
    99 00000111 5A                              	POP	EDX
   100 00000112 7E E8                           	JLE	L7
   101 00000114 6A 21                           	PUSH	33
   102 00000116 6A 12                           	PUSH	18
   103 00000118 E8 00000049                     	CALL	_io_write_io_apic
   104 0000011D 0F BE 46 20                     	MOVSX	EAX,BYTE [32+ESI]
   105 00000121 C1 E0 18                        	SAL	EAX,24
   106 00000124 50                              	PUSH	EAX
   107 00000125 6A 13                           	PUSH	19
   108 00000127 E8 0000003A                     	CALL	_io_write_io_apic
   109 0000012C 6A 20                           	PUSH	32
   110 0000012E 6A 14                           	PUSH	20
   111 00000130 E8 00000031                     	CALL	_io_write_io_apic
   112 00000135 0F BE 46 20                     	MOVSX	EAX,BYTE [32+ESI]
   113 00000139 C1 E0 18                        	SAL	EAX,24
   114 0000013C 50                              	PUSH	EAX
   115 0000013D 6A 15                           	PUSH	21
   116 0000013F E8 00000022                     	CALL	_io_write_io_apic
   117 00000144 83 C4 20                        	ADD	ESP,32
   118 00000147 6A 2C                           	PUSH	44
   119 00000149 6A 28                           	PUSH	40
   120 0000014B E8 00000016                     	CALL	_io_write_io_apic
   121 00000150 0F BE 46 20                     	MOVSX	EAX,BYTE [32+ESI]
   122 00000154 C1 E0 18                        	SAL	EAX,24
   123 00000157 50                              	PUSH	EAX
   124 00000158 6A 29                           	PUSH	41
   125 0000015A E8 00000007                     	CALL	_io_write_io_apic
   126 0000015F 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   127 00000162 5B                              	POP	EBX
   128 00000163 5E                              	POP	ESI
   129 00000164 5D                              	POP	EBP
   130 00000165 C3                              	RET
   131 00000166                                 	GLOBAL	_io_write_io_apic
   132 00000166                                 _io_write_io_apic:
   133 00000166 55                              	PUSH	EBP
   134 00000167 89 E5                           	MOV	EBP,ESP
   135 00000169 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   136 0000016C A2 FEC00000                     	MOV	BYTE [-20971520],AL
   137 00000171 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   138 00000174 A3 FEC00010                     	MOV	DWORD [-20971504],EAX
   139 00000179 5D                              	POP	EBP
   140 0000017A C3                              	RET
