真实地址
0x00000000-0x000fffff 1M低端内存
0x00100000-0x00267fff 1440kb软盘内容
0x00268000-0x00269000 4k内核页表(正常使用)(4k映射)
0x00269000-0x0026a000 4k内核页表(紧急调试)(4M全映射)
0x0026a000-0x0026b000 内存分布探测图
0x00268000-0x00267fff 30k空
0x0026f800-0x0026ffff 2k idt
0x00270000-0x0027ffff 64kgdt
0x00280000-0x002fffff 512k haribote.hrb
0x00300000-0x003fffff 1M 栈空间
0x00400000-0x00800000 4M内核页表
0x00800000-0x00900000 1M内存分配表
0x00900000-7 自由内存区

虚拟地址
0x00000000-0xbfffffff 自由内存区
0xc0000000-0xc000ffff 64k gdt
0xc0010000-0xc001ffff 64k ldt
0xc0020000-0xc00207ff 2k idt
0xc0021000 memman
0xc0100000-0xc017ffff 512k haribote.hrb
全局变量区
0x0026f000(int) pageman
0x0026f004(int) total_page_num
0x0026f008(int) free_page_num
0x0026f00c(int) last_free_page_num
0x0026f010(int) last_err_free_page_num
0x0026f014(int) memman_core
0x0026f018(int) shtctl[10]
0x0026f01c(int) shtctl_num
0x0026f020(int) file_list_base
0x0026f020(int) file_num
0x0026f024(int) 启动分区的mbr
0x0026f028(int) FAT保存位置
0x0026f02c(char) 硬盘状态指示器
0x0026f030 part_base_lba
0x0026f034 part_endl_lba
0x0026f038 root_dir_addr
0x0026f03c &sht_back[10]
0x0026f040 &MOUSE_DEC

00:00:10.565085 0000000000000000-000000000009ffff 0000000000000000 Conventional RAM
00:00:10.565088 00000000000a0000-00000000000bffff 0000000000000000 VGA - VGA Video Buffer
00:00:10.565090 00000000000c0000-00000000000c8fff 0000000000000000 VGA BIOS
00:00:10.565093 00000000000e0000-00000000000e0fff 0000000000000000 ACPI RSDP
00:00:10.565095 00000000000e1000-00000000000e1fff 0000000000000000 DMI tables
00:00:10.565097 00000000000e2000-00000000000effff 0000000000000000 Net Boot ROM
00:00:10.565099 00000000000f0000-00000000000fffff 0000000000000000 PC BIOS - 0xfffff
00:00:10.565101 0000000000100000-00000000001fffff 0000000000000000 Extended RAM, 1-2MB
00:00:10.565103 0000000000200000-000000003fffffff 0000000000000000 Extended RAM, >2MB
00:00:10.565106 00000000e0000000-00000000e1ffffff 000000000c630000 VRam
00:00:10.565108 00000000f0000000-00000000f0000fff 0000000000000000 PCnet
00:00:10.565110 00000000f0400000-00000000f07fffff 000000000be00000 VMMDev
00:00:10.565113 00000000f0800000-00000000f0803fff 000000000c200000 VMMDev Heap
00:00:10.565115 00000000f0804000-00000000f0804fff 0000000000000000 USB OHCI
00:00:10.565117 00000000fec00000-00000000fec00fff 0000000000000000 I/O APIC
00:00:10.565120 00000000fee00000-00000000fee00fff 0000000000000000 APIC
00:00:10.565122 00000000ffff0000-00000000ffffffff 0000000000000000 PC BIOS - 0xffffffff

00:00:11.787940 GC Phys Range                     pvHC            
00:00:11.787942 0000000000000000-000000000009ffff 0000000000000000 Conventional RAM
00:00:11.787945 00000000000a0000-00000000000bffff 0000000000000000 VGA - VGA Video Buffer
00:00:11.787947 00000000000c0000-00000000000c8fff 0000000000000000 VGA BIOS
00:00:11.787949 00000000000e0000-00000000000e0fff 0000000000000000 ACPI RSDP
00:00:11.787951 00000000000e1000-00000000000e1fff 0000000000000000 DMI tables
00:00:11.787953 00000000000e2000-00000000000effff 0000000000000000 Net Boot ROM
00:00:11.787955 00000000000f0000-00000000000fffff 0000000000000000 PC BIOS - 0xfffff
00:00:11.787957 0000000000100000-00000000001fffff 0000000000000000 Extended RAM, 1-2MB
00:00:11.787959 0000000000200000-00000000dfffffff 0000000000000000 Extended RAM, >2MB
00:00:11.787962 00000000e0000000-00000000e1ffffff 000000000da70000 VRam
00:00:11.787964 00000000f0000000-00000000f0000fff 0000000000000000 PCnet
00:00:11.787966 00000000f0400000-00000000f07fffff 000000000d240000 VMMDev
00:00:11.787968 00000000f0800000-00000000f0803fff 000000000d640000 VMMDev Heap
00:00:11.787970 00000000f0804000-00000000f0804fff 0000000000000000 USB OHCI
00:00:11.787972 00000000fec00000-00000000fec00fff 0000000000000000 I/O APIC
00:00:11.787974 00000000fee00000-00000000fee00fff 0000000000000000 APIC
00:00:11.787977 00000000ffff0000-00000000ffffffff 0000000000000000 PC BIOS - 0xffffffff
00:00:11.787979 0000000100000000-00000001587fffff 0000000000000000 Above 4GB Base RAM
//打开TPM
section .data
tpm_base equ 0xfed40000  ; TPM base address
tpm_access equ tpm_base + 0x0

section .text
global _start
_start:
mov eax, tpm_access
mov byte [eax], 0x20 ; request TPM access

; TPM communication code here

mov eax, 1 ; exit system call
xor ebx, ebx
int 0x80

/* reg[0] : EDI,   reg[1] : ESI,   reg[2] : EBP,   reg[3] : ESP */
/* reg[4] : EBX,   reg[5] : EDX,   reg[6] : ECX,   reg[7] : EAX */